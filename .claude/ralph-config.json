{
  "$schema": "https://raw.githubusercontent.com/frankbria/ralph-claude-code/main/schemas/ralph-config.schema.json",
  "version": "1.0.0",
  "project": {
    "name": "OMS NestJS",
    "description": "Order Management System for saddle manufacturing - NestJS backend with Next.js frontend",
    "type": "fullstack",
    "framework": {
      "backend": "nestjs",
      "frontend": "nextjs"
    }
  },
  "environments": {
    "local": {
      "name": "Local Development",
      "maxIterations": 15,
      "allowedTools": [
        "Bash",
        "Read",
        "Write",
        "Edit",
        "Glob",
        "Grep",
        "TodoWrite",
        "Task",
        "WebFetch",
        "WebSearch",
        "AskUserQuestion"
      ],
      "testCommands": {
        "backend": {
          "lint": "cd backend && npm run lint",
          "typecheck": "cd backend && npx tsc --noEmit",
          "build": "cd backend && npm run build",
          "test": "cd backend && npm run test",
          "test:unit": "cd backend && npm run test:unit",
          "test:cov": "cd backend && npm run test:cov",
          "test:e2e": "cd backend && npm run test:e2e"
        },
        "frontend": {
          "lint": "cd frontend && npm run lint",
          "typecheck": "cd frontend && npx tsc --noEmit",
          "build": "cd frontend && npm run build",
          "test": "cd frontend && npm run test"
        }
      },
      "devCommands": {
        "backend:start": "cd backend && npm run start:dev",
        "frontend:start": "cd frontend && npm run dev",
        "migration:generate": "cd backend && npm run migration:generate",
        "migration:run": "cd backend && npm run migration:run",
        "seed:run": "cd backend && npm run seed:run:relational"
      },
      "safetyChecks": {
        "requireTests": true,
        "requireBuild": true,
        "requireLint": true
      }
    },
    "staging": {
      "name": "Staging Environment",
      "maxIterations": 8,
      "allowedTools": [
        "Bash",
        "Read",
        "Write",
        "Edit",
        "Glob",
        "Grep",
        "TodoWrite",
        "Task",
        "WebFetch"
      ],
      "testCommands": {
        "backend": {
          "lint": "cd backend && npm run lint",
          "build": "cd backend && npm run build",
          "test": "cd backend && npm run test"
        },
        "frontend": {
          "lint": "cd frontend && npm run lint",
          "build": "cd frontend && npm run build",
          "test": "cd frontend && npm run test"
        },
        "e2e": {
          "test": "cd e2e && npx playwright test"
        }
      },
      "deployCommands": {
        "deploy": "./scripts/deploy-staging-v2.sh"
      },
      "safetyChecks": {
        "requireTests": true,
        "requireBuild": true,
        "requireLint": true,
        "dryRunFirst": true
      }
    },
    "production": {
      "name": "Production Environment",
      "maxIterations": 5,
      "allowedTools": [
        "Bash",
        "Read",
        "Glob",
        "Grep",
        "TodoWrite",
        "Task"
      ],
      "testCommands": {
        "healthcheck": "curl -f http://localhost:3000/health || exit 1"
      },
      "deployCommands": {
        "deploy": "./scripts/deploy-production.sh"
      },
      "safetyChecks": {
        "requireTests": true,
        "requireBuild": true,
        "requireLint": true,
        "requireApproval": true,
        "backupRequired": true,
        "dryRunFirst": true
      },
      "restrictions": {
        "noDirectWrites": true,
        "noSchemaChanges": true,
        "deploymentOnly": true
      }
    }
  },
  "qualityGates": {
    "backend": {
      "testCoverage": {
        "minimum": 90,
        "target": 95
      },
      "buildSuccess": true,
      "lintClean": true,
      "noTypeErrors": true
    },
    "frontend": {
      "testCoverage": {
        "minimum": 85,
        "target": 90
      },
      "buildSuccess": true,
      "lintClean": true,
      "noTypeErrors": true
    },
    "performance": {
      "apiResponseTime": {
        "list": 100,
        "single": 50
      },
      "cacheHitRate": 85
    }
  },
  "completionPhrases": {
    "local": "LOCAL DEVELOPMENT COMPLETE",
    "staging": "STAGING DEPLOYMENT COMPLETE",
    "production": "PRODUCTION DEPLOYMENT COMPLETE",
    "feature": "FEATURE IMPLEMENTATION COMPLETE",
    "bugfix": "BUG FIX COMPLETE",
    "test": "TESTS PASSING"
  },
  "paths": {
    "backend": "./backend",
    "frontend": "./frontend",
    "e2e": "./e2e",
    "specs": "./specs",
    "docs": "./docs",
    "migrations": "./backend/database/migrations",
    "scripts": "./scripts"
  },
  "conventions": {
    "branchNaming": {
      "feature": "feature/{ticket}-{description}",
      "bugfix": "bugfix/{ticket}-{description}",
      "hotfix": "hotfix/{ticket}-{description}"
    },
    "commitMessage": {
      "format": "conventional",
      "types": ["feat", "fix", "docs", "style", "refactor", "perf", "test", "chore"]
    },
    "codeStyle": {
      "backend": "eslint + prettier",
      "frontend": "eslint + next lint"
    }
  },
  "integrations": {
    "database": {
      "type": "postgresql",
      "orm": "typeorm"
    },
    "cache": {
      "type": "redis"
    },
    "containerization": {
      "type": "docker",
      "orchestration": "kubernetes"
    },
    "ci": {
      "type": "jenkins",
      "url": "https://cicd.ordermysaddle.com/blue/pipelines/"
    }
  },
  "notifications": {
    "onSuccess": {
      "showSummary": true,
      "includeMetrics": true
    },
    "onFailure": {
      "showErrors": true,
      "suggestFixes": true
    },
    "onIterationLimit": {
      "showProgress": true,
      "suggestNextSteps": true
    }
  }
}
